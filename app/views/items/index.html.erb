<p id="notice"><%= notice %></p>

<h1>Items</h1>

<% if current_user && current_user.merchant? %>
<%= link_to 'New Item', new_merchant_item_path(current_user) %>
<% end %>
<table>
  <thead>
    <tr>
      <% if current_admin? || current_user && current_user.merchant? %>
      <th>ID</th>
      <% unless current_user && current_user.merchant? %>
      <th>Merchant</th>
      <% end %>
      <th>Name</th>
      <th>Description</th>
      <th></th>
      <th>Price</th>
      <th>Inventory</th>
      <% current_admin? || current_user && current_user.merchant? %>
      <th>Active</th>
      <th colspan="3"></th>
      <% end %>
    </tr>
  </thead>

  <tbody>
    <% @items.each do |item| %>
      <tr id="item-<%= item.id %>">
        <td>ID: <%= item.id %></td>
        <% if current_admin? || current_user != item.user %>
        <td>Merchant: <%= item.user.name %></td>
        <% end %>
        <td><%= item.name %></td>
        <td><%= item.description %></td>
        <td><img id="item-image-<%= item.id %>" src="<%= item.image %>" width="200" /></td>
        <td>Price: <%= item.price %></td>
        <td>Inventory: <%= item.inventory %></td>
        <td><%= item.active %></td>
        <td><%= link_to 'Show', item_path(item) %></td>
        <% if current_admin? || current_user && current_user == item.user %>
        <td><%= link_to 'Edit Item', edit_merchant_item_path(current_user, item) %></td>
        <td>
          <% if item.active %>
          <%= button_to "Disable Item", merchant_item_disable_path(current_user, item.id), method: :patch, params: { toggle: :disable } %>
          <% else %>
          <%= button_to "Enable Item", merchant_item_enable_path(current_user, item.id), method: :patch, params: { toggle: :enable } %>
          <% end %>

        </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
